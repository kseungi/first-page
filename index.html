import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.awt.event.MouseMotionListener;
import javax.swing.JApplet;
import javax.swing.JComponent;
 
class Missile
{
    private int x = 0;
    private int y = 100;
    private final int diameter;
    private int missileSpeed = 1;
    
    public Missile(int d, int x, int y)
    {
        this.diameter = d;
        this.x = x;
        this.y = y;
    }
 
    public void paint(Graphics g)
    {
        y -= missileSpeed;
        g.setColor(Color.RED);
        g.fillOval(x, y, diameter, diameter);
    }
}
 
class ShootingGame extends JComponent implements MouseMotionListener, MouseListener      
{
    private Image fuselImage; //비행기체
    private Image background; //배경
    private Missile[] missile;
    private int pointX, pointY = 0;
    private int missileCounter = 0;
    
    public ShootingGame()
    {
        fuselImage = getToolkit().createImage("fuselage.gif"); //비행기체 로딩
        background = getToolkit().createImage("background.jpg"); //배경 로딩
        missile = new Missile[100];
        addMouseMotionListener(this);
        addMouseListener(this);
    }
    
    public void paint(Graphics g)
    {
        super.paint(g);
        Graphics2D g2 = (Graphics2D) g;
        g2.drawImage(background, 0, 0, this);
        g2.drawImage(fuselImage, pointX-fuselImage.getWidth(null)/2, pointY, this);
        
        for(int i = 0 ; i < missile.length ; ++i)
        {
            if(missile[i] != null)
            {
                missile[i].paint(g2);
            }
        }
    }
    
    @Override
    public void mouseDragged(MouseEvent e) 
    {
         pointX = e.getX();
         pointY = e.getY();
    }
    
    public void mouseMoved(MouseEvent e)
    {
         pointX = e.getX();
         pointY = e.getY();
    }
 
    public void mousePressed(MouseEvent e) 
    {
        if(missileCounter <  missile.length) 
        {
            missile[missileCounter++] = new Missile(10, pointX-5, pointY);
        }
        else
        {
            missileCounter = 0;
        }
        repaint();
    }
    
    public void mouseReleased(MouseEvent e){}
    public void mouseClicked(MouseEvent e){}
    public void mouseEntered(MouseEvent e){}
    public void mouseExited(MouseEvent e){}
}
 
public class ShootingGameExample extends JApplet implements Runnable
{
    private Thread aThread;
    private ShootingGame game;
    
    public void init()
    {
        game = new ShootingGame();
        add(game);
        setSize(598,900);
    }
    
    public void start()
    {
        if(aThread == null)
        {
            aThread = new Thread();
            aThread.start();    
        }
    }
    
    public void stop()
    {
        if(aThread != null)
        {
            aThread = null;
        }
    }
    
    public void run()
    {
        while(true)
        {
            try {Thread.sleep(10);}
            catch (InterruptedException e) {e.printStackTrace();}
            repaint();
        }
    }
}
